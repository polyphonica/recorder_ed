{% extends 'base.html' %}

{% block title %}Step {{ step_number }}: {{ step_info.title }} - {{ block.super }}{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8 max-w-3xl">
    <!-- Breadcrumb -->
    <div class="text-sm breadcrumbs mb-4">
        <ul>
            <li><a href="{% url 'teacher_applications:onboarding_dashboard' %}">Onboarding</a></li>
            <li>Step {{ step_number }}</li>
        </ul>
    </div>

    <!-- Progress Indicator -->
    <div class="flex items-center gap-2 mb-8">
        {% for i in "12345" %}
        <div class="flex-1">
            <div class="h-2 rounded-full {% if forloop.counter == step_number %}bg-primary{% elif forloop.counter <= onboarding.get_completed_steps_count %}bg-success{% else %}bg-base-300{% endif %}"></div>
        </div>
        {% endfor %}
    </div>

    <!-- Step Content -->
    <div class="card bg-base-100 shadow-xl">
        <div class="card-body">
            <!-- Header -->
            <div class="flex items-center gap-4 mb-6">
                <div class="avatar placeholder">
                    <div class="w-16 rounded-full bg-primary text-primary-content">
                        <span class="text-2xl">{{ step_number }}</span>
                    </div>
                </div>
                <div>
                    <h1 class="text-3xl font-bold">{{ step_info.title }}</h1>
                    <p class="text-base-content/70">{{ step_info.description }}</p>
                </div>
            </div>

            <div class="divider"></div>

            <!-- Step-specific content -->
            <div class="space-y-6">
                {% if step_number == 1 %}
                <div class="alert alert-info">
                    <i class="fas fa-info-circle"></i>
                    <span>Complete your profile to help students get to know you better. Add a profile picture, bio, and contact information.</span>
                </div>
                {% elif step_number == 2 %}
                <div class="alert alert-info">
                    <i class="fas fa-info-circle"></i>
                    <span>List your teaching qualifications, certifications, and years of experience. This builds trust with potential students.</span>
                </div>
                {% elif step_number == 3 %}
                <div class="alert alert-info">
                    <i class="fas fa-info-circle"></i>
                    <span>Set your general availability so students know when you're available to teach. You can update this anytime.</span>
                </div>
                {% elif step_number == 4 %}
                <div class="alert alert-info">
                    <i class="fas fa-info-circle"></i>
                    <span>Setup your payment information to receive lesson fees. We use Stripe for secure payment processing.</span>
                </div>
                {% elif step_number == 5 %}
                <div class="alert alert-info">
                    <i class="fas fa-info-circle"></i>
                    <span>Create your first workshop or private teaching listing to start attracting students!</span>
                </div>
                {% endif %}

                <!-- Action Button -->
                <div class="card bg-base-200">
                    <div class="card-body">
                        <h3 class="font-bold mb-2">Ready to complete this step?</h3>
                        <p class="text-sm text-base-content/70 mb-4">
                            Click the button below to {{ step_info.action_text|lower }}. Once you're done, come back here to mark this step as complete.
                        </p>
                        <div class="flex gap-4">
                            <a href="{% url step_info.action_url %}" class="btn btn-primary" target="_blank">
                                <i class="fas fa-external-link-alt mr-2"></i>
                                {{ step_info.action_text }}
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Manual completion (for demo purposes) -->
                <div class="card bg-base-200">
                    <div class="card-body">
                        <h3 class="font-bold mb-2">Mark as Complete</h3>
                        <p class="text-sm text-base-content/70 mb-4">
                            Once you've completed the step above, mark it as complete to move to the next step.
                        </p>
                        <form method="post">
                            {% csrf_token %}
                            <button type="submit" name="mark_complete" class="btn btn-success">
                                <i class="fas fa-check-circle mr-2"></i>
                                Mark Step {{ step_number }} as Complete
                            </button>
                        </form>
                    </div>
                </div>
            </div>

            <div class="divider"></div>

            <!-- Navigation -->
            <div class="flex justify-between">
                <a href="{% url 'teacher_applications:onboarding_dashboard' %}" class="btn btn-ghost">
                    <i class="fas fa-arrow-left mr-2"></i>
                    Back to Dashboard
                </a>

                {% if step_number < 5 %}
                <a href="{% url 'teacher_applications:onboarding_step' step_number|add:1 %}" class="btn btn-ghost">
                    Skip to Next Step
                    <i class="fas fa-arrow-right ml-2"></i>
                </a>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
