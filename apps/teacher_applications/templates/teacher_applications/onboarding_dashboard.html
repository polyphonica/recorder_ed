{% extends 'base.html' %}

{% block title %}Teacher Onboarding - {{ block.super }}{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8 max-w-4xl">
    <!-- Header -->
    <div class="text-center mb-8">
        <h1 class="text-4xl font-bold mb-2">Welcome to Recorder-ed!</h1>
        <p class="text-lg text-base-content/70">Let's get you set up to start teaching</p>
    </div>

    <!-- Progress Bar -->
    <div class="card bg-base-100 shadow-xl mb-8">
        <div class="card-body">
            <h2 class="card-title mb-4">Your Onboarding Progress</h2>

            <div class="flex items-center gap-4 mb-4">
                <div class="flex-1">
                    <progress class="progress progress-primary w-full h-4" value="{{ progress_percentage }}" max="100"></progress>
                </div>
                <div class="text-2xl font-bold text-primary">{{ progress_percentage }}%</div>
            </div>

            <p class="text-sm text-base-content/60">
                {{ onboarding.get_completed_steps_count }} of 5 steps completed
            </p>
        </div>
    </div>

    <!-- Onboarding Steps -->
    <div class="space-y-4">
        <!-- Step 1 -->
        <div class="card bg-base-100 shadow-xl {% if onboarding.step_1_profile_complete %}border-2 border-success{% elif next_step == 1 %}border-2 border-primary{% endif %}">
            <div class="card-body">
                <div class="flex items-center justify-between">
                    <div class="flex items-center gap-4 flex-1">
                        <div class="avatar placeholder">
                            <div class="w-12 rounded-full {% if onboarding.step_1_profile_complete %}bg-success text-success-content{% elif next_step == 1 %}bg-primary text-primary-content{% else %}bg-base-300{% endif %}">
                                <span>{% if onboarding.step_1_profile_complete %}<i class="fas fa-check"></i>{% else %}1{% endif %}</span>
                            </div>
                        </div>
                        <div>
                            <h3 class="font-bold text-lg">Complete Your Profile</h3>
                            <p class="text-sm text-base-content/60">Add your personal information and bio</p>
                            {% if onboarding.step_1_completed_at %}
                            <p class="text-xs text-success mt-1"><i class="fas fa-check-circle"></i> Completed {{ onboarding.step_1_completed_at|timesince }} ago</p>
                            {% endif %}
                        </div>
                    </div>
                    <div>
                        {% if not onboarding.step_1_profile_complete %}
                        <a href="{% url 'teacher_applications:onboarding_step' 1 %}" class="btn btn-primary">
                            {% if next_step == 1 %}Start{% else %}Continue{% endif %}
                        </a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>

        <!-- Step 2 -->
        <div class="card bg-base-100 shadow-xl {% if onboarding.step_2_qualifications_added %}border-2 border-success{% elif next_step == 2 %}border-2 border-primary{% endif %}">
            <div class="card-body">
                <div class="flex items-center justify-between">
                    <div class="flex items-center gap-4 flex-1">
                        <div class="avatar placeholder">
                            <div class="w-12 rounded-full {% if onboarding.step_2_qualifications_added %}bg-success text-success-content{% elif next_step == 2 %}bg-primary text-primary-content{% else %}bg-base-300{% endif %}">
                                <span>{% if onboarding.step_2_qualifications_added %}<i class="fas fa-check"></i>{% else %}2{% endif %}</span>
                            </div>
                        </div>
                        <div>
                            <h3 class="font-bold text-lg">Add Your Qualifications</h3>
                            <p class="text-sm text-base-content/60">List your teaching qualifications and experience</p>
                            {% if onboarding.step_2_completed_at %}
                            <p class="text-xs text-success mt-1"><i class="fas fa-check-circle"></i> Completed {{ onboarding.step_2_completed_at|timesince }} ago</p>
                            {% endif %}
                        </div>
                    </div>
                    <div>
                        {% if not onboarding.step_2_qualifications_added %}
                        <a href="{% url 'teacher_applications:onboarding_step' 2 %}" class="btn {% if next_step == 2 %}btn-primary{% else %}btn-ghost{% endif %}">
                            {% if next_step == 2 %}Start{% else %}Skip to Step{% endif %}
                        </a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>

        <!-- Step 3 -->
        <div class="card bg-base-100 shadow-xl {% if onboarding.step_3_availability_set %}border-2 border-success{% elif next_step == 3 %}border-2 border-primary{% endif %}">
            <div class="card-body">
                <div class="flex items-center justify-between">
                    <div class="flex items-center gap-4 flex-1">
                        <div class="avatar placeholder">
                            <div class="w-12 rounded-full {% if onboarding.step_3_availability_set %}bg-success text-success-content{% elif next_step == 3 %}bg-primary text-primary-content{% else %}bg-base-300{% endif %}">
                                <span>{% if onboarding.step_3_availability_set %}<i class="fas fa-check"></i>{% else %}3{% endif %}</span>
                            </div>
                        </div>
                        <div>
                            <h3 class="font-bold text-lg">Set Your Availability</h3>
                            <p class="text-sm text-base-content/60">Define when you are available to teach</p>
                            {% if onboarding.step_3_completed_at %}
                            <p class="text-xs text-success mt-1"><i class="fas fa-check-circle"></i> Completed {{ onboarding.step_3_completed_at|timesince }} ago</p>
                            {% endif %}
                        </div>
                    </div>
                    <div>
                        {% if not onboarding.step_3_availability_set %}
                        <a href="{% url 'teacher_applications:onboarding_step' 3 %}" class="btn {% if next_step == 3 %}btn-primary{% else %}btn-ghost{% endif %}">
                            {% if next_step == 3 %}Start{% else %}Skip to Step{% endif %}
                        </a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>

        <!-- Step 4 -->
        <div class="card bg-base-100 shadow-xl {% if onboarding.step_4_payment_setup %}border-2 border-success{% elif next_step == 4 %}border-2 border-primary{% endif %}">
            <div class="card-body">
                <div class="flex items-center justify-between">
                    <div class="flex items-center gap-4 flex-1">
                        <div class="avatar placeholder">
                            <div class="w-12 rounded-full {% if onboarding.step_4_payment_setup %}bg-success text-success-content{% elif next_step == 4 %}bg-primary text-primary-content{% else %}bg-base-300{% endif %}">
                                <span>{% if onboarding.step_4_payment_setup %}<i class="fas fa-check"></i>{% else %}4{% endif %}</span>
                            </div>
                        </div>
                        <div>
                            <h3 class="font-bold text-lg">Setup Payment Information</h3>
                            <p class="text-sm text-base-content/60">Configure how you will receive payments</p>
                            {% if onboarding.step_4_completed_at %}
                            <p class="text-xs text-success mt-1"><i class="fas fa-check-circle"></i> Completed {{ onboarding.step_4_completed_at|timesince }} ago</p>
                            {% endif %}
                        </div>
                    </div>
                    <div>
                        {% if not onboarding.step_4_payment_setup %}
                        <a href="{% url 'teacher_applications:onboarding_step' 4 %}" class="btn {% if next_step == 4 %}btn-primary{% else %}btn-ghost{% endif %}">
                            {% if next_step == 4 %}Start{% else %}Skip to Step{% endif %}
                        </a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>

        <!-- Step 5 -->
        <div class="card bg-base-100 shadow-xl {% if onboarding.step_5_first_listing_created %}border-2 border-success{% elif next_step == 5 %}border-2 border-primary{% endif %}">
            <div class="card-body">
                <div class="flex items-center justify-between">
                    <div class="flex items-center gap-4 flex-1">
                        <div class="avatar placeholder">
                            <div class="w-12 rounded-full {% if onboarding.step_5_first_listing_created %}bg-success text-success-content{% elif next_step == 5 %}bg-primary text-primary-content{% else %}bg-base-300{% endif %}">
                                <span>{% if onboarding.step_5_first_listing_created %}<i class="fas fa-check"></i>{% else %}5{% endif %}</span>
                            </div>
                        </div>
                        <div>
                            <h3 class="font-bold text-lg">Create Your First Listing</h3>
                            <p class="text-sm text-base-content/60">Create your first workshop or private teaching listing</p>
                            {% if onboarding.step_5_completed_at %}
                            <p class="text-xs text-success mt-1"><i class="fas fa-check-circle"></i> Completed {{ onboarding.step_5_completed_at|timesince }} ago</p>
                            {% endif %}
                        </div>
                    </div>
                    <div>
                        {% if not onboarding.step_5_first_listing_created %}
                        <a href="{% url 'teacher_applications:onboarding_step' 5 %}" class="btn {% if next_step == 5 %}btn-primary{% else %}btn-ghost{% endif %}">
                            {% if next_step == 5 %}Start{% else %}Skip to Step{% endif %}
                        </a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Call to Action -->
    {% if next_step %}
    <div class="text-center mt-8">
        <a href="{% url 'teacher_applications:onboarding_step' next_step %}" class="btn btn-primary btn-lg">
            Continue to Step {{ next_step }}
            <i class="fas fa-arrow-right ml-2"></i>
        </a>
    </div>
    {% else %}
    <div class="alert alert-success mt-8">
        <i class="fas fa-check-circle text-2xl"></i>
        <div>
            <h3 class="font-bold">Onboarding Complete!</h3>
            <div class="text-sm">You're all set to start teaching on Recorder-ed!</div>
        </div>
        <div>
            <a href="{% url 'workshops:instructor_dashboard' %}" class="btn btn-sm btn-success">
                Go to Dashboard
            </a>
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}
