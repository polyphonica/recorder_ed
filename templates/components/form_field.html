{# Usage: {% include 'components/form_field.html' with field=form.name label='Full Name' placeholder='Enter your name' %} #}

<div class="{% if inline %}flex-1{% endif %}">
    <label for="{{ field.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
        {{ label }}
        {% if field.field.required %}<span class="text-red-500" aria-label="required">*</span>{% endif %}
    </label>

    {% if field.field.widget.input_type == 'textarea' %}
        <textarea name="{{ field.name }}"
                  id="{{ field.id_for_label }}"
                  rows="{{ rows|default:3 }}"
                  class="w-full px-4 py-2 border-2 border-gray-300 rounded-lg
                         focus:border-{{ color|default:'teaching' }} focus:outline-none focus:ring-2 focus:ring-{{ color|default:'teaching' }} transition-colors
                         {% if field.errors %}border-red-500{% endif %}"
                  {% if field.field.required %}required aria-required="true"{% endif %}
                  {% if field.errors %}aria-invalid="true" aria-describedby="{{ field.id_for_label }}-error"{% endif %}
                  {% if field.help_text %}aria-describedby="{{ field.id_for_label }}-help{% if field.errors %} {{ field.id_for_label }}-error{% endif %}"{% endif %}
                  placeholder="{{ placeholder }}">{{ field.value|default:'' }}</textarea>
    {% elif field.field.widget.input_type == 'select' %}
        <select name="{{ field.name }}"
                id="{{ field.id_for_label }}"
                class="w-full px-4 py-2 border-2 border-gray-300 rounded-lg
                       focus:border-{{ color|default:'teaching' }} focus:outline-none focus:ring-2 focus:ring-{{ color|default:'teaching' }} transition-colors
                       {% if field.errors %}border-red-500{% endif %}"
                {% if field.field.required %}required aria-required="true"{% endif %}
                {% if field.errors %}aria-invalid="true" aria-describedby="{{ field.id_for_label }}-error"{% endif %}
                {% if field.help_text %}aria-describedby="{{ field.id_for_label }}-help{% if field.errors %} {{ field.id_for_label }}-error{% endif %}"{% endif %}>
            {{ field }}
        </select>
    {% else %}
        <input type="{{ field.field.widget.input_type }}"
               name="{{ field.name }}"
               id="{{ field.id_for_label }}"
               value="{{ field.value|default:'' }}"
               class="w-full px-4 py-2 border-2 border-gray-300 rounded-lg
                      focus:border-{{ color|default:'teaching' }} focus:outline-none focus:ring-2 focus:ring-{{ color|default:'teaching' }} transition-colors
                      {% if field.errors %}border-red-500{% endif %}"
               {% if field.field.required %}required aria-required="true"{% endif %}
               {% if field.errors %}aria-invalid="true" aria-describedby="{{ field.id_for_label }}-error"{% endif %}
               {% if field.help_text %}aria-describedby="{{ field.id_for_label }}-help{% if field.errors %} {{ field.id_for_label }}-error{% endif %}"{% endif %}
               placeholder="{{ placeholder }}">
    {% endif %}

    {% if field.help_text %}
        <p id="{{ field.id_for_label }}-help" class="mt-1 text-sm text-gray-500">{{ field.help_text }}</p>
    {% endif %}

    {% if field.errors %}
        <p id="{{ field.id_for_label }}-error" class="mt-1 text-sm text-red-600" role="alert" aria-live="polite">
            {{ field.errors.0 }}
        </p>
    {% endif %}
</div>